Bootstrap:docker
From: ubuntu:20.04
Stage: devel

%setup
%files
    src /sudoku/src
    Project.toml /sudoku/
    sudoku.ipynb /sudoku/

%environment
    APPNAME="sudoku"

%post
    apt update && apt install -y wget julia python3-pip
    python3 -m pip install jupyter
    cd sudoku
    julia -e "using Pkg; pkg\"activate . \"; pkg\"instantiate\"; pkg\"precompile\"; "

%runscript
    cd /sudoku
    julia "$@" -e "@everywhere using Pkg; @everywhere pkg\"activate . \";include(\"src/Main.jl\")"

%startscript


##############################
# jupyter notebook
##############################
%apprun jupyter
    cd /sudoku
    jupyter-notebook sudoku.ipynb